Your goal is to generate comprehensive unit tests for the currently selected code snippet.

Requirements:
* Use the pytest framework.
* Ensure all tests are self-contained and independent.
* Include fixtures and mock-ups for any external dependencies.
* Aim for clear, concise, and maintainable tests.
